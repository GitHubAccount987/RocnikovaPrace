let myArray = [];

let objectInedx = -1;

function setup() {
  
  createCanvas(windowWidth, windowHeight);

  background(255);
  
  strokeWeight(5);
  
}

function draw() {
  
  /*if (objectIndex => 0) {
    
    let pointObject = myArray[objectIndex];
    
  }*/
}

function mouseReleased() {
  
  console.log("Mouse released")
  
  objectIndex = -1;
  
}

function mousePressed() {

  {
  
    let value;
    
    for (let i = 0; i < myArray.length; i++) {

      value = myArray[i];
      
      if (value.position.dist(createVector(mouseX, mouseY)) < 5) {

        console.log("X: " + value.position.x + ", Y: " + value.position.y);

        objectIndex = i;
        
        return;
      }
    }
  }
  
  console.log("Point create");
  
  myArray.push({
    
    render: point(mouseX, mouseY),
    position: createVector(mouseX, mouseY)
    
  })
  
  strokeWeight(1);
  
}

function clearArray() { myArray.length = 0; }

function keyPressed() {
  
  // C => Clear canvas
  
  if (keyCode == 67) {
   
    clearArray();
    
    setup();
    
    return;
  }
  
  // D => Draw shape
  
  if (keyCode == 68) {
    
    noFill();
    beginShape();
    
    myArray.forEach((value) => {
      
      vertex(value.position.x, value.position.y);
      
    })
    
    endShape(CLOSE);
    
    clearArray();
    
    return;
  }
  
  // S => Save
  
  if (keyCode == 83) {
    
    let fileName = prompt("File name");
    
    if (!fileName) return;
    
    saveCanvas(`${fileName}.jpg`);
    
    return;
  }
}
